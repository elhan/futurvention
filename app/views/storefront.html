<div class="container-page storefront">
  <div class="container-y container-page-inner">
    <!--Profile completion timeline-->
    <fv-timeline-h></fv-timeline-h>
    <!-- Profile picture -->
    <div class="wrapper-pic">
      <div class="wrapper-pic-inner" ng-click="editProfileSection('info')">
        <div ng-if="profile.image" class="image-profile profile-picture-m" fv-bg-image={{profile.image}}>
          <div ng-if="isCurrentUser">
            <i class="fa-centered fa fa-camera"></i>
          </div>
        </div>
        <i ng-if="!profile.image && isCurrentUser" class="text-h2 fa-centered fa fa-camera bg-grey95 wrapper-round clickable"></i>
      </div>
      <!-- Profile details -->
      <div class="container-y wrapper-details">
        <div class="container-x text-h2">
          <div class="wrapper-name">{{ profile.firstName }}</div>
          <div class="wrapper-name">{{ profile.lastName }}</div>
        </div>
        <div class="container-x text-p">
          <div>{{profile.title}}</div>
        </div>
        <div class="container-x text-p">
          <div>{{profile.city}}</div>
        </div>
      </div>
    </div>
    <div class="profile-cover-container">
      <!-- Cover picture -->
      <div class="profile-cover-bg" fv-bg-image={{profile.image}}></div>
      <!-- Anchor navigation tabs -->
      <div class="storefront-tabs">
        <div class="placeholder"></div>
        <div class="storefront-tab active">SERVICES</div>
        <a class="storefront-tab" href="#portfolio-header" offset="80" du-smooth-scroll>PORTFOLIO</a>
        <a class="storefront-tab" href="#reviews-header" offset="80" du-smooth-scroll>REVIEWS</a>
        <a class="storefront-tab" href="#bio-header" offset="80" du-smooth-scroll>ABOUT ME</a>
        <div class="wrapper-link text-t">
          <a ng-href="http://{{ profile.personalUrl }}" target="_blank">
            <i class="fa fa-link icon-link"></i>
            <span>{{ profile.personalUrl }}</span>
          </a>
          <!-- Share btn -->
          <div class="wrapper-share-btn" ng-if="isCurrentUser">
            <button class="button btn btn-blue" ng-click="shareProfile()">Share my profile</button>
          </div>
          <!-- Contact btn -->
          <div class="wrapper-contact-btn" ng-if="!isCurrentUser">
            <button class="button btn btn-blue" ng-click="showContactModal()">Contact</button>
          </div>
        </div>
      </div>
    </div>
    <!-- Offered Services Section -->
    <div ng-if="offers.length > 0">
      <div class="container-x flex-items-end">
        <div id="portfolio-header" class="text-h3 flex-content-centered flex-1">Services Offered</div>
        <div class="text-blue text-p clickable" ng-if="isCurrentUser" ng-click="editProfileSection('service_selection')">
          <i class="fa fa-pencil"></i>
          Edit
        </div>
      </div>
      <div class="thumbnail-grid flex-wrap">
        <div ng-repeat="offer in offers" class="col-sm-6 col-md-3 wrapper-thumb">
          <div class="thumbnail">
            <div class="wrapper-img flex-content-centered" ng-click="go('/offer/{{offer.id}}')">
              <img data-src="holder.js/100%x180" alt="100%x180" src="images/thumb.jpg" class="img-responsive">
            </div>
            <div class="thumb-overlay" ng-if="isCurrentUser">
              <div class="thumb-overlay-inner" ng-click="editOffer(offer.serviceName)">
                <i class="fa fa-pencil"></i>
              </div>
              <div class="divider-thumb-overlay"></div>
              <div class="thumb-overlay-inner" ng-click="removeOffer(offer.serviceName)">
                <i class="fa fa-times"></i>
              </div>
            </div>
            <div class="caption">
              <div class="container-x flex-content-spread">
                <div class="text-p-bold">{{ offer.serviceName }}</div>
                <div class="text-p-bold">{{ offer.lowestPrice }}</div>
              </div>
            </div>
          </div>
        </div>
        <!-- 'Add service' placeholder -->
        <div class="col-sm-6 col-md-3 wrapper-thumb-placeholder" ng-if="isCurrentUser" ng-click="editProfileSection('service_selection')">
          <div class="thumb-placeholder flex-content-centered">+</div>
        </div>
      </div>
    </div>
    <!-- Portfolio Section -->
    <div ng-if="portfolio.items.length > 0">
      <!-- Divider -->
      <div class="container-x flex-content-centered">
        <div class="col-md-2 divider"></div>
      </div>
      <div class="container-x">
        <div id="portfolio-header" class="text-h3 flex-content-centered flex-1">Portfolio</div>
      </div>
      <div class="portfolio-items">
        <div class="thumbnail-grid flex-wrap">
          <div ng-repeat="item in portfolio.items" class="col-sm-4 col-md-2 wrapper-thumb">
            <div class="wrapper-img flex-content-centered">
              <img data-src="holder.js/100%x180" alt="100%x180" src="images/thumb.jpg" class="img-responsive">
            </div>
            <div class="caption">
              <div class="text-p-bold">{{ item.title }}</div>
            </div>
          </div>
        </div>
      </div>
      <div class="portfolio-footer" ng-if="isCurrentUser">
        <div class="text-p text-grey space-after">To add a new portfolio item, you must first associate it with a service. Visit the</div>
        <button class="btn btn-link text-p no-padding" ng-click="editProfileSection('service_selection')">
          <span class="space-after">service selection</span>
        </button>
        <div class="text-p text-grey">page to do so.</div>
      </div>
    </div>
    <!-- Reviews -->
    <div ng-if="reviews.length > 0">
      <!-- Divider -->
      <div class="container-x flex-content-centered">
        <div class="col-md-2 divider"></div>
      </div>
      <div class="container-x">
        <div id="reviews-header" class="text-h3 flex-content-centered flex-1">Reviews</div>
      </div>
      <div class="review" ng-repeat="review in reviews" ng-class="{'last': $index === reviews.length - 1}">
        <div class="content container-x">
          <div class="wrapper-reviewer-img">
            <div class="reviewer-img">D</div>
          </div>
          <div class="container-y flex-1 flex-content-spread">
            <div class="container-x review-text">{{ review.text }}</div>
            <div class="container-x flex-content-spread">
              <div class="container-x">
                <div class="icon-provider-xs"></div>
                <div class="text-i text-lightGrey space-after">{{ review.reviewer.firstName }},</div>
                <div class="text-i text-lightGrey">{{ review.timeAgo }}</div>
              </div>
              <div class="container-x text-p">
                <!-- full stars -->
                <div class="text-yellow" ng-repeat="star in range(review.rating)">
                  <i class="fa fa-star"></i>
                </div>
                <!-- empty stars -->
                <div class="text-yellow" ng-repeat="star in range(5 - review.rating)">
                  <i class="fa fa-star-o"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Reviews -->
    <div ng-if="profile.bio.length > 0">
      <!-- Divider -->
      <div class="container-x flex-content-centered">
        <div class="col-md-2 divider"></div>
      </div>
      <div class="container-x flex-content-centered">
        <div class="container-x flex-items-end">
          <div id="bio-header" class="text-h3" ng-if="isCurrentUser">About me</div>
          <div id="bio-header" class="text-h3" ng-if="!isCurrentUser">
            <span class="space-after">About</span>
            <span>{{ profile.firstName }}</span>
          </div>
          <div class="text-blue text-p clickable" ng-click="editProfileSection('info')" ng-if="isCurrentUser">
            <i class="fa fa-pencil"></i>
            Edit
          </div>
        </div>
      </div>
      <div class="bio">{{ profile.bio }}</div>
    </div>
  </div>
</div>
