!function(){"use strict";var a=angular.module("fvApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","mgcrea.ngStrap","mgcrea.ngStrap.modal"]);a.config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html"}).when("/apply",{templateUrl:"views/apply.html"})}])}(),function(){"use strict";var a=angular.module("fvApp");a.constant("AUTH_EVENTS",{loginSuccess:"auth-login-success",loginFailed:"auth-login-failed",logoutSuccess:"auth-logout-success",sessionTimeout:"auth-session-timeout",notAuthenticated:"auth-not-authenticated",notAuthorized:"auth-not-authorized"}),a.constant("USER_ROLES",{all:"*",admin:"admin"})}(),function(){"use strict";var a=angular.module("fvApp");a.controller("MainCtrl",["$scope","$location","$modal","USER_ROLES","AuthSvc",function(a,b,c,d,e){a.currentUser=null,a.userRoles=d,a.isAuthorized=e.isAuthorized,a.setCurrentUser=function(b){a.currentUser=b},a.go=function(a){b.path(a)}}]),a.controller("LoginCtrl",["$scope","$rootScope","AUTH_EVENTS","AuthSvc",function(a,b,c,d){a.credentials={username:"",password:""},a.login=function(e){d.login(e).then(function(d){b.$broadcast(c.loginSuccess),a.setCurrentUser(d)},function(){b.$broadcast(c.loginFailed)})}}])}(),function(){"use strict";var a=angular.module("fvApp");a.directive("fvslider",["$document","$timeout",function(a,b){var c=40,d=38;return{restrict:"E",templateUrl:"views/directives/fv-slider.html",link:function(e,f,g){function h(a){b(function(){"up"===e.direction?e.index++:e.index--},l*a)}function i(){return function(a){var b=window.event||a,c=Math.max(-1,Math.min(1,b.wheelDelta||-b.detail));return e.$apply(e.goToSlide(0>c?e.index+1:e.index-1)),!1}}function j(a){a.keyCode===c&&e.$apply(function(){e.goToSlide(e.index+1)}),a.keyCode===d&&e.$apply(function(){e.goToSlide(e.index-1)})}var k=600,l=200,m=!1;e.options={fullscreen:g.fullscreen,keyboard:g.keyboard,count:g.count||0,slidename:g.slidename||"slide",indicator:g.indicator,navbtn:g.navbtn},e.slides=[];for(var n=0;n<g.count;n++)e.slides.push(g.slidename+n);e.index=0,e.direction="up",e.speed=800,e.goToSlide=function(a){var c=0;if(!(m||0>a||a===e.slides.length)){m=!0,b(function(){m=!1},1e3,!1),e.direction=e.index>a?"down":"up",c=Math.abs(e.index-a),e.speed=k-(c-1)*l;for(var d=0;c>d;d++)h(d)}},angular.element(a).bind("keydown",j),document.addEventListener&&(document.addEventListener("mousewheel",i(),!1),document.addEventListener("DOMMouseScroll",i(),!1))}}}])}(),function(){"use strict";var a=angular.module("fvApp");a.service("SessionSvc",function(){return this.create=function(a,b,c){this.id=a,this.userId=b,this.userRole=c},this.destroy=function(){this.id=null,this.userId=null,this.userRole=null},this}),a.factory("AuthSvc",["$http","SessionSvc",function(a,b){var c={};return c.login=function(c){return a.post("/login",c).then(function(a){return b.create(a.data.id,a.data.user.id,a.data.user.role),a.data.user})},c.isAuthenticated=function(){return!!b.userId},c.isAuthorized=function(a){return angular.isArray(a)||(a=[a]),c.isAuthenticated()&&-1!==a.indexOf(b.userRole)},c}])}();