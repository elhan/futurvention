!function(){"use strict";var a=angular.module("fvApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","mgcrea.ngStrap","mgcrea.ngStrap.modal","facebook","ngLinkedIn","config","firebase"]);a.config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html"}).when("/apply",{templateUrl:"views/apply.html"})}]),a.config(["FacebookProvider","$linkedInProvider","ENV",function(a,b,c){a.init(c.fbApiKey),b.set("appKey",c.liApiKey)}])}(),function(){"use strict";angular.module("config",[]).constant("ENV",{name:"development",apiEndpoint:"http://localhost:9000",fbApiKey:"676011345823665",liApiKey:"77d2smbm870t22"})}(),function(){"use strict";var a=angular.module("fvApp");a.constant("AUTH_EVENTS",{loginSuccess:"auth-login-success",loginFailed:"auth-login-failed",logoutSuccess:"auth-logout-success",sessionTimeout:"auth-session-timeout",notAuthenticated:"auth-not-authenticated",notAuthorized:"auth-not-authorized"}),a.constant("USER_ROLES",{all:"*",admin:"admin",guest:"guest"})}(),function(){"use strict";var a=angular.module("fvApp");a.controller("MainCtrl",["$scope","$location","$modal","USER_ROLES","AuthSvc",function(a,b,c,d,e){a.currentUser=null,a.userRoles=d,a.isAuthorized=e.isAuthorized,a.setCurrentUser=function(b){a.currentUser=b},a.go=function(a){b.path(a)}}]),a.controller("LoginCtrl",["$scope","$rootScope","AUTH_EVENTS","AuthSvc",function(a,b,c,d){a.newUser={firstName:"",lastName:"",email:"",password:""},a.login=function(e){d.login(e).then(function(d){console.log(d),b.$broadcast(c.loginSuccess),a.setCurrentUser(d)},function(){b.$broadcast(c.loginFailed)})},a.loginFb=function(){d.loginFb().then(function(){console.log("logged in with facebook")})},a.loginLi=function(){d.loginLi().then(function(){console.log("logged in with linkedin")})}}]),a.controller("HeaderCtrl",["$scope","$location",function(a,b){a.locationAt=function(a){return a===b.path()}}])}(),function(){"use strict";var a=angular.module("fvApp");a.directive("fvSlider",["$document","$timeout",function(a,b){var c=40,d=38;return{restrict:"E",templateUrl:"views/directives/fv-slider.html",link:function(e,f,g){function h(a){b(function(){"up"===e.direction?e.index++:e.index--},l*a)}function i(){return function(a){var b=window.event||a,c=Math.max(-1,Math.min(1,b.wheelDelta||-b.detail));return e.$apply(e.goToSlide(0>c?e.index+1:e.index-1)),!1}}function j(a){a.keyCode===c&&e.$apply(function(){e.goToSlide(e.index+1)}),a.keyCode===d&&e.$apply(function(){e.goToSlide(e.index-1)})}var k=600,l=200,m=!1;g.fullscreen&&angular.element("body").css("overflow","hidden"),e.options={fullscreen:g.fullscreen,keyboard:g.keyboard,count:g.count||0,slidename:g.slidename||"slide",indicator:g.indicator,navbtn:g.navbtn},e.slides=[];for(var n=0;n<g.count;n++)e.slides.push(g.slidename+n);e.index=0,e.direction="up",e.speed=800,e.goToSlide=function(a){var c=0;if(!(m||0>a||a===e.slides.length)){m=!0,b(function(){m=!1},1e3,!1),e.direction=e.index>a?"down":"up",c=Math.abs(e.index-a),e.speed=k-(c-1)*l;for(var d=0;c>d;d++)h(d)}},angular.element(a).on("keydown",j),document.addEventListener&&(document.addEventListener("mousewheel",i(),!1),document.addEventListener("DOMMouseScroll",i(),!1)),e.$on("$destroy",function(){g.fullscreen&&angular.element("body").css("overflow","auto"),angular.element(a).off("keydown"),angular.element(a).off("mousewheel"),angular.element(a).off("DOMMouseScroll")})}}}]),a.directive("fvFormNoBubble",function(){return{restinct:"E",link:function(){for(var a=document.getElementsByTagName("form"),b=0;b<a.length;b++)a[b].addEventListener("invalid",function(a){a.preventDefault()})}}})}(),function(){"use strict";var a=angular.module("fvApp");a.service("SessionSvc",function(){return this.create=function(a,b,c){this.id=a,this.userId=b,this.userRole=c},this.destroy=function(){this.id=null,this.userId=null,this.userRole=null},this}),a.factory("AuthSvc",["$http","$linkedIn","SessionSvc","Facebook",function(a,b,c,d){var e={};return e.login=function(b){return a.post("/login",b).then(function(a){return console.log(a),c.create(a.data.id,a.data.user.id,a.data.user.role),a.data.user})},e.isAuthenticated=function(){return!!c.userId},e.isAuthorized=function(a){return angular.isArray(a)||(a=[a]),e.isAuthenticated()&&-1!==a.indexOf(c.userRole)},e.loginFb=function(){return d.login(function(a){console.log(a)})},e.getFbLoginStatus=function(){d.getLoginStatus(function(a){console.log(a)})},e.loginLi=function(){return b.authorize().then(function(){console.log("linkedin auth success")})},e}])}();